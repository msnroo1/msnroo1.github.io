
<html>
<head>
<title>XMLHttpRequest Trial</title>  
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" /> 
<meta http-equiv="content-style-type" content="text/css" /> 
<script type="text/javascript"><!--
var xmlHttpReq;
var txt="";

function requestFile(fileName)
{
  var xmlHttpReq = createHttpRequest();
  xmlHttpReq.open('GET', fileName ,true);
  xmlHttpReq.onreadystatechange = function() {

    if (xmlHttpReq.readyState==4) {
      //alert(xmlHttpReq.responseText);
	
	//xmlHttpReq.responseText;
	document.getElementById("otsu").innerHTML = xmlHttpReq.responseText;
    }
  }
  xmlHttpReq.send(null);
}

function saveFile(fileName) {



}

/*function saveFile(fileName, id) {
  txt = document.getElementById(id).value;

  //xmlHttpReq = createHttpRequest();
  if (xmlHttpReq) {
   xmlHttpReq.open("GET", fileName+"?text="+escape(txt), true);
   //document.getElementById(id).value = xmlHttpReq.responseText;
  }

  xmlHttpReq.send(null);
}*/

function createHttpRequest() {
 var x = null;

 // for IE7, Firefox, Safari
 if (window.XMLHttpRequest) {
  return new XMLHttpRequest();
 }
 return x;
}



function showDiag(){
	//requestFile('./load.rb');
	user = window.prompt("Your clear","user" );
	if(user != ""){
		var node = document.getElementById("otsu");
  		node.innerHTML = node.innerHTML + "\nClear user name "+ user + " : Clear time : " + "1s";
		//saveFile('./test.txt');
		}
	}

requestFile('./test.txt');

// --></script>
</head>
<body>

<input id="Button" type="button" value="ose" onclick="showDiag()">
<p id="otsu"></p>
</body>
</html>